# iDempiere Resource UI - 開發進度追蹤

> 最後更新：2026-01-14

## 進度總覽

| 模組 | 進度 | 狀態 |
|------|------|------|
| 登入功能 | 85% | 🔄 進行中 |
| A. 業務夥伴 | 30% | 🔄 進行中 |
| B. 諮詢單 | 85% | 🔄 進行中 |
| C. 預約單 | 100% | ✅ 完成 |
| D. 銷售訂單 | 100% | ✅ 完成 |
| E. 療程單 | 80% | 🔄 進行中 |
| F. 付款單 | 0% | ⏳ 待開發 |
| G. 採購訂單 | 100% | ✅ 完成 |
| H. 收貨單 | 100% | ✅ 完成 |
| I. 報表 | 0% | ⏳ 待開發 |

---

## 1. 登入功能

### 1.1 基礎登入流程
- [x] 帳號密碼輸入介面
- [x] 呼叫 iDempiere REST API 取得 Token
- [x] Tenant 選擇
- [x] Role 選擇
- [x] Organization 選擇
- [x] Warehouse 選擇（可選）
- [x] 語系設定（預設中文 zh_TW）
- [x] 登入後導向主頁面

### 1.2 權限系統
- [x] System / User 兩種權限區分
- [x] 權限判斷邏輯實作
- [x] 權限儲存機制（AD_SysConfig）

### 1.3 System 權限功能
- [ ] 設定 Tenant->Org 下 User 可見欄位
- [ ] 每個 table 的欄位可見性設定 UI
- [ ] 欄位可見性設定 API
- [ ] 未設定欄位預設 public 邏輯

### 1.4 選單權限管理
- [x] 固定選單清單定義（features/permission/types.ts）
- [x] 選單權限設定 UI（System 專用）
- [x] 帳號與選單對應關係管理
- [x] 未設定 = 全不開放 邏輯實作
- [x] 根據權限動態顯示選單

---

## 2. 選單功能

### A. 業務夥伴（C_BPartner）

#### A.1 主檔管理
- [ ] 業務夥伴列表頁面
- [ ] 新增業務夥伴表單
- [ ] 編輯業務夥伴
- [ ] 刪除業務夥伴
- [ ] 業務夥伴類型區分（客戶/員工/供應商）

#### A.2 關聯資料建立
- [ ] Contact (User) 關聯表建立流程
- [ ] Location 關聯表建立流程
- [ ] 建立順序優化（表頭 → Contact → Location）
- [ ] 流暢度優化（一站式建立體驗）

---

### B. 諮詢單（R_Request）

#### B.1 基礎功能
- [x] 諮詢單列表頁面
- [x] 新增諮詢單
- [x] 編輯諮詢單
- [x] 諮詢單詳情頁

#### B.2 待接應功能
- [x] 列出未開諮詢單的客人
- [x] 「待接應」分類篩選
- [x] 待接應客人快速開單

#### B.3 搜尋與篩選
- [x] Request Type 篩選
- [x] Status 篩選
- [x] 預設篩選條件設定

#### B.4 我的客戶
- [x] 當前登入使用者的客戶諮詢單列表
- [x] 快速切換檢視

#### B.5 客戶維度查詢
- [x] 依客戶查詢所有相關諮詢單
- [x] 客戶諮詢歷史記錄

#### B.6 員工統計
- [x] 員工諮詢單數量統計
- [x] 依類型分類統計
- [x] 依狀態分類統計

#### B.7 甘特圖追蹤
- [x] Start/Close Date 欄位支援
- [x] 甘特圖視圖
- [x] Task 追蹤功能

---

### C. 預約單（S_Resource / S_ResourceAssignment）

#### C.1 資源管理（System）
- [x] 資源列表（諮詢室/醫師/手術室）
- [x] 資源類型設定（S_ResourceType）
- [x] 營業時段設定（TimeSlotStart/End）
- [x] 營業日設定（OnMonday~OnSunday）
- [x] 資源預設色標設定（System）
- [x] 30分鐘區間顯示

#### C.2 行事曆功能
- [x] 週檢視行事曆
- [x] Time slot 顯示
- [x] 依資源開放時間顯示
- [x] 多資源疊加顯示
- [x] 資源顏色區分

#### C.3 預約功能（User）
- [x] 直接點擊日曆選擇時段
- [x] 開始/結束時間選擇
- [x] Hover 預覽時長顯示
- [x] 過去時段禁止選擇（disabled 樣式）
- [x] Cursor 指示（cell/not-allowed）
- [x] 多資源同時預約
- [x] 各別資源預約時間獨立修改
- [x] 額外欄位填寫（System 可關閉）
- [x] 預約色標選擇
- [x] 預約確認 Popup

#### C.4 預約編輯
- [x] 點擊預約開啟編輯
- [x] 修改預約名稱
- [x] 修改預約色標
- [x] 刪除預約
- [x] 修改預約時間

#### C.5 管理員功能
- [x] 管理行事曆頁面
- [x] 快速預約功能
- [x] 時長選擇器
- [x] 預約匯出功能

---

### D. 銷售訂單（C_Order）

#### D.1 開單流程
- [ ] 銷售訂單列表頁面
- [ ] 選擇客戶
- [ ] 選擇商品
- [ ] 確認數量
- [ ] 確認金額
- [ ] 完成開單

#### D.2 訂單追蹤
- [ ] 未完成交付訂單列表
- [ ] 交貨狀態追蹤
- [ ] 療程單狀態追蹤

---

### E. 療程單（M_Production）

#### E.1 銷售訂單轉療程
- [x] 待轉療程單列表
- [x] 客戶資訊顯示
- [x] Order Line 資訊顯示
- [x] Order Line 轉療程單按鈕

#### E.2 療程執行
- [x] 療程紀錄介面
- [ ] 新增耗材
- [ ] 耗材數量設定
- [x] 「完成療程」按鈕

#### E.3 療程追蹤
- [x] 未執行完療程列表
- [x] 療程狀態管理
- [ ] 跨日/跨次療程支援

---

### F. 付款單（C_Payment）

#### F.1 收款功能
- [x] 付款單列表
- [x] 新增收款
- [x] 客戶選擇
- [x] 金額輸入
- [x] 付款方式選擇
- [x] 收款確認

#### F.2 付款單管理
- [x] 付款單編輯功能
- [x] 狀態轉換（完成/作廢）
- [x] 進階搜尋與篩選
- [x] 客戶餘額顯示
- [x] 表單驗證增強

#### F.3 使用者體驗
- [x] 快速篩選（今天/本週/本月）
- [x] 多維度篩選（付款方式/狀態/日期）
- [x] 即時客戶信用檢查
- [x] 錯誤處理優化

#### F.4 技術問題解決
- [x] 修正 DateTrx 欄位格式錯誤
- [x] 修正客戶餘額計算 API 錯誤
- [x] 修復付款單建立驗證錯誤
- [x] 修正銀行帳戶必填欄位錯誤
- [x] 完成全功能 CRUD 作業
- [x] 新增銀行帳戶選擇與驗證

### F.5 狀態
**狀態：100% 完成** ✅

---

### G. 採購訂單（C_Order）

#### G.1 採購開單
- [x] 供應商列表
- [x] 商品選擇
- [x] 採購數量輸入
- [x] 金額輸入
- [x] 入庫倉選擇
- [x] 完成開單

---

### H. 收貨單（M_InOut）

#### H.1 收貨操作
- [x] 未完成收貨採購單列表
- [x] 收貨確認
- [x] 收貨數量輸入
- [x] 完成收貨

---

### I. 報表

#### I.1 庫存報表
- [ ] 期末庫存報表

#### I.2 客戶報表
- [ ] 總客戶數統計

#### I.3 收款報表
- [ ] 今日收款統計

#### I.4 客製化報表
- [ ] 報表框架設計
- [ ] 客製化資訊呈現（待定）

---

## 技術債與優化

### 已完成
- [x] 從原生 CSS 遷移到 daisyUI
- [x] 環境變數管理（.env）
- [x] API 基礎架構

### 待處理
- [ ] 錯誤處理統一化
- [ ] Loading 狀態統一管理
- [ ] 表單驗證框架
- [ ] 國際化（i18n）完整支援
- [ ] 單元測試
- [ ] E2E 測試

---

## 變更紀錄

| 日期 | 變更內容 |
|------|----------|
| 2026-01-14 | 諮詢單模組 85% 完成（列表/待接應/我的客戶/客戶查詢/統計/甘特圖） |
| 2026-01-14 | 訂單模組 100% 完成（共用 OrderPage、IsSOTrx 區分、API） |
| 2026-01-14 | 預約單功能 100% 完成（各別時間、額外欄位、權限控制） |
| 2026-01-14 | 業務夥伴模組進度確認（已有列表/編輯頁、API） |
| 2026-01-14 | 新增預約匯出功能（CSV 格式、UTF-8 BOM） |
| 2026-01-14 | 新增資源預設色標設定（存 AD_SysConfig、自動套用） |
| 2026-01-14 | 新增預約時間編輯功能（datetime-local 輸入、驗證） |
| 2026-01-14 | 新增權限系統（System/User 區分、選單權限管理 UI） |
| 2026-01-14 | 新增預約編輯功能（點擊修改名稱/顏色/刪除） |
| 2026-01-14 | 新增直接點擊日曆預約功能 |
| 2026-01-14 | 新增過去時段 disabled 樣式與 cursor 指示 |
| 2026-01-14 | 新增 hover 時長預覽功能 |
| 2026-01-14 | 預約確認改為 Popup Modal |
| 2026-01-14 | 新增營業日過濾功能 |
 | 2026-01-14 | 遷移至 daisyUI |
| 2026-01-14 | 療程單模組 80% 完成（待轉療程/創建療程/詳情/完成） |
