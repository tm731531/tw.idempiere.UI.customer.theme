# æ¡è³¼ QR Code æƒæç³»çµ± - è¨­è¨ˆè¦æ ¼æ›¸

> ç‰ˆæœ¬: 1.0
> å»ºç«‹æ—¥æœŸ: 2026-01-26
> ç‹€æ…‹: è¨­è¨ˆå¯©æŸ¥ä¸­

---

## ä¸€ã€å°ˆæ¡ˆæ¦‚è¿°

### 1.1 èƒŒæ™¯

ç¾è¡Œæ¡è³¼æµç¨‹éœ€è¦å›åˆ° iDempiere ç³»çµ±æ“ä½œï¼Œéç¨‹ç¹ç‘£ã€‚æœ¬ç³»çµ±æä¾›ä¸€å€‹è¡Œå‹•åŒ–çš„æ¡è³¼è§£æ±ºæ–¹æ¡ˆï¼Œè®“ä½¿ç”¨è€…åœ¨ä»»ä½•åœ°é»ï¼ˆå®¶æ¨‚ç¦ã€æ°´æœæ”¤ç­‰ï¼‰éƒ½èƒ½å¿«é€Ÿå®Œæˆæ¡è³¼å–®å»ºç«‹ã€‚

### 1.2 ç›®æ¨™

- ç‚ºæ‰€æœ‰ç”¢å“ç”¢ç”Ÿ QR Codeï¼Œå¯å°å‡ºéš¨èº«æ”œå¸¶
- æä¾›æ‰‹æ©Ÿç¶²é æƒæåŠŸèƒ½ï¼Œç¾å ´å¿«é€Ÿå»ºç«‹æ¡è³¼å–®
- æ¡è³¼å–®å®Œæˆå¾Œè‡ªå‹•è§¸ç™¼ iDempiere çš„ MRï¼ˆæ”¶è²¨ï¼‰åŠ Invoiceï¼ˆç™¼ç¥¨ï¼‰æµç¨‹

### 1.3 ä½¿ç”¨æƒ…å¢ƒ

```
ä½¿ç”¨è€…åœ¨æ°´æœæ”¤è³¼è²·é¦™è•‰ 7 æ ¹ã€è˜‹æœ 3 é¡†
    â†“
æ‰“é–‹æ‰‹æ©Ÿç¶²é  â†’ æƒææ¡è³¼é 
    â†“
é¸æ“‡ä¾›æ‡‰å•†ã€Œæ°´æœæ”¤é˜¿å§¨ã€(æˆ–æ–°å¢)
    â†“
æƒæé¦™è•‰ QR Code â†’ è¼¸å…¥æ•¸é‡ 7ã€å–®åƒ¹ 15
    â†“
æƒæè˜‹æœ QR Code â†’ è¼¸å…¥æ•¸é‡ 3ã€å–®åƒ¹ 20
    â†“
æŒ‰ä¸‹ã€Œå®Œæˆæ¡è³¼å–®ã€
    â†“
ç³»çµ±è‡ªå‹•å»ºç«‹æ¡è³¼å–®ä¸¦å®Œæˆ
    â†“
iDempiere è‡ªå‹•ç”¢ç”Ÿ MR åŠ Invoice
```

---

## äºŒã€åŠŸèƒ½è¦æ ¼

### 2.1 QR Code ç”¢ç”ŸåŠŸèƒ½

#### 2.1.1 QR Code å…§å®¹æ ¼å¼

```json
{
  "product": "BANANA"
}
```

| æ¬„ä½ | èªªæ˜ | ä¾†æº |
|------|------|------|
| `product` | ç”¢å“ç·¨ç¢¼ | M_Product.Value |

#### 2.1.2 åŠŸèƒ½éœ€æ±‚

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| ç”¢å“æœå°‹ | ä¾å“åæˆ–ç·¨ç¢¼æœå°‹ç”¢å“ | å¿…è¦ |
| å¤šé¸ç”¢å“ | å¯å‹¾é¸å¤šå€‹ç”¢å“æ‰¹é‡ç”¢ç”Ÿ | å¿…è¦ |
| å–®å¼µé è¦½ | é¡¯ç¤ºå–®ä¸€ QR Code ä¸¦å¯ä¸‹è¼‰ | å¿…è¦ |
| æ‰¹é‡åˆ—å° | ç”¢ç”Ÿ PDFï¼ŒA4 æ’ç‰ˆ (3x4ï¼Œæ¯é  12 å€‹) | å¿…è¦ |
| å…¨é¸/å–æ¶ˆ | å¿«é€Ÿé¸å–æ‰€æœ‰ç”¢å“ | å»ºè­° |

#### 2.1.3 QR Code æ¨™ç±¤å…§å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ QR CODE â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚
â”‚   é¦™è•‰          â”‚
â”‚   BANANA        â”‚
â”‚   å–®ä½: æ ¹      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.2 æƒææ¡è³¼åŠŸèƒ½

#### 2.2.1 é é¢æµç¨‹

```
é¸æ“‡ä¾›æ‡‰å•† (å¿…å¡«)
    â†“
é¸æ“‡å…¥åº«å€‰åº« (å¿…å¡«ï¼Œé è¨­ä½¿ç”¨ç™»å…¥æ™‚çš„å€‰åº«æˆ– House)
    â†“
é–‹å§‹æƒæ / æ‰‹å‹•è¼¸å…¥ç”¢å“ç·¨ç¢¼
    â†“
å½ˆå‡ºè¼¸å…¥æ¡† (æ•¸é‡ã€å–®åƒ¹)
    â†“
åŠ å…¥æ¡è³¼æ¸…å–®
    â†“
å¯åœ¨æ¸…å–®ä¸­ä¿®æ”¹æ•¸é‡/å–®åƒ¹/åˆªé™¤
    â†“
å®Œæˆæ¡è³¼å–®
```

#### 2.2.2 ä¾›æ‡‰å•†è™•ç†

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| ä¾›æ‡‰å•†æ¸…å–® | å¾ iDempiere å–å¾— IsVendor=Y çš„ C_BPartner |
| æ–°å¢ä¾›æ‡‰å•† | å¯ç¾å ´æ–°å¢è‡¨æ™‚ä¾›æ‡‰å•†ï¼Œè‡ªå‹•ç”¢ç”Ÿç·¨ç¢¼ |
| ä¾›æ‡‰å•†ç·¨ç¢¼è¦å‰‡ | `V-{YYYYMMDD}-{åºè™Ÿ}` ä¾‹: V-20260126-001 |

**æ–°å¢ä¾›æ‡‰å•†æµç¨‹** (éœ€åŒæ™‚å»ºç«‹åœ°å€)ï¼š
```
1. POST /api/v1/models/C_Location
   å»ºç«‹åœ°å€ (æœ€å°å¿…å¡«æ¬„ä½å³å¯)
       â†“
2. POST /api/v1/models/C_BPartner
   å»ºç«‹ä¾›æ‡‰å•† (IsVendor=Y)
       â†“
3. POST /api/v1/models/C_BPartner_Location
   é—œè¯ä¾›æ‡‰å•†èˆ‡åœ°å€
```

#### 2.2.3 æƒæå¾Œè¼¸å…¥

| æ¬„ä½ | å¿…å¡« | é è¨­å€¼ | èªªæ˜ |
|------|------|--------|------|
| æ•¸é‡ | æ˜¯ | 1 | æ¡è³¼æ•¸é‡ |
| å–®åƒ¹ | å¦ | 1 | å¯¦éš›è³¼è²·å–®åƒ¹ |

#### 2.2.4 æ¡è³¼æ¸…å–®åŠŸèƒ½

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| é¡¯ç¤ºé …ç›® | å“åã€æ•¸é‡ã€å–®åƒ¹ã€å°è¨ˆ |
| ä¿®æ”¹æ•¸é‡ | ç›´æ¥åœ¨æ¸…å–®ä¸­ç·¨è¼¯ |
| ä¿®æ”¹å–®åƒ¹ | ç›´æ¥åœ¨æ¸…å–®ä¸­ç·¨è¼¯ |
| åˆªé™¤é …ç›® | é»æ“Š âœ• ç§»é™¤ |
| æ¸…ç©ºæ¸…å–® | ä¸€éµæ¸…é™¤æ‰€æœ‰é …ç›® |
| è‡ªå‹•è¨ˆç®— | å³æ™‚æ›´æ–°å°è¨ˆèˆ‡ç¸½è¨ˆ |

---

### 2.3 æ¡è³¼å–®å»ºç«‹æµç¨‹

#### 2.3.1 API å‘¼å«é †åº

```
1. POST /api/v1/models/C_Order
   å»ºç«‹æ¡è³¼å–® Header
       â†“
2. POST /api/v1/models/C_OrderLine (è¿´åœˆ)
   å»ºç«‹æ¯å€‹æ¡è³¼é …ç›®
       â†“
3. POST /api/v1/processes/c_order-process
   Body: { "table-id": 259, "record-id": {C_Order_ID} }
   å®Œæˆæ¡è³¼å–® (é€é Process å‘¼å«)
   è¨»: table-id 259 = C_Order çš„ AD_Table_ID
       â†“
4. iDempiere è‡ªå‹•è™•ç†
   - ç”¢ç”Ÿ M_InOut (MR)
   - ç”¢ç”Ÿ C_Invoice (IN)
```

#### 2.3.2 C_Order æ¬„ä½å°æ‡‰

| æ¬„ä½ | å€¼ | èªªæ˜ |
|------|-----|------|
| C_BPartner_ID | é¸æ“‡çš„ä¾›æ‡‰å•† | å¿…å¡« |
| IsSOTrx | false | æ¡è³¼å–® |
| M_Warehouse_ID | é¸æ“‡çš„å€‰åº« | å¿…å¡« |
| C_DocTypeTarget_ID | æ¡è³¼å–® DocType | å¾ç³»çµ±å–å¾— |
| DateOrdered | ç•¶å¤©æ—¥æœŸ | è‡ªå‹•å¸¶å…¥ |

#### 2.3.3 C_OrderLine æ¬„ä½å°æ‡‰

| æ¬„ä½ | å€¼ | èªªæ˜ |
|------|-----|------|
| C_Order_ID | ä¸Šä¸€æ­¥ç”¢ç”Ÿçš„ ID | å¿…å¡« |
| M_Product_ID | æƒæçš„ç”¢å“ ID | å¿…å¡« |
| QtyOrdered | è¼¸å…¥çš„æ•¸é‡ | å¿…å¡« |
| PriceActual | è¼¸å…¥çš„å–®åƒ¹ | é è¨­ 1 |

**å‚™è¨»**ï¼š
- C_UOM_IDï¼šiDempiere æœƒè‡ªå‹•å¾ M_Product å¸¶å…¥ï¼Œä¸éœ€å‚³é€
- C_Tax_IDï¼šä½¿ç”¨ç³»çµ±é è¨­çš„ Standard ç¨…åˆ¥

---

## ä¸‰ã€UI è¨­è¨ˆ

### 3.1 æƒææ¡è³¼é 

#### 3.1.1 åˆå§‹ç‹€æ…‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°  æƒææ¡è³¼                    [?]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  ä¾›æ‡‰å•† *                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ è«‹é¸æ“‡ä¾›æ‡‰å•†          â–¼  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  [+ æ–°å¢ä¾›æ‡‰å•†]                      â”‚
â”‚                                      â”‚
â”‚  å…¥åº«å€‰åº«                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ä¸»å€‰åº«                â–¼  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                              â”‚    â”‚
â”‚  â”‚        ğŸ“· é»æ“Šé–‹å§‹æƒæ       â”‚    â”‚
â”‚  â”‚                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚
â”‚  â”€â”€â”€ æˆ–æ‰‹å‹•è¼¸å…¥ â”€â”€â”€                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ç”¢å“ç·¨ç¢¼            â”‚  â”‚ +  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜    â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ æ¡è³¼æ¸…å–® (0 é …)                  â”‚
â”‚                                      â”‚
â”‚     å°šç„¡å•†å“ï¼Œè«‹é–‹å§‹æƒæ             â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.2 æƒææˆåŠŸå½ˆçª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  âœ“ æƒææˆåŠŸ                    â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  é¦™è•‰ (BANANA)                 â”‚  â”‚
â”‚  â”‚  å–®ä½: æ ¹                      â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  æ•¸é‡ *                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ 1                      â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  å–®åƒ¹ (é¸å¡«ï¼Œé è¨­ 1)           â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ 1                      â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  å–æ¶ˆ   â”‚  â”‚  åŠ å…¥æ¸…å–®  â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.3 æœ‰é …ç›®æ™‚çš„æ¸…å–®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°  æƒææ¡è³¼                    [?]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  ä¾›æ‡‰å•†: å®¶æ¨‚ç¦å…§æ¹–åº—    [è®Šæ›´]      â”‚
â”‚  å€‰  åº«: ä¸»å€‰åº«                      â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚        ğŸ“· ç¹¼çºŒæƒæ           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ æ¡è³¼æ¸…å–® (3 é …)        [æ¸…ç©º]    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ é¦™è•‰                           â”‚  â”‚
â”‚  â”‚ æ•¸é‡: [7___] æ ¹  å–®åƒ¹: [15__]  â”‚  â”‚
â”‚  â”‚ å°è¨ˆ: $105                 [âœ•] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ è˜‹æœ                           â”‚  â”‚
â”‚  â”‚ æ•¸é‡: [3___] é¡†  å–®åƒ¹: [20__]  â”‚  â”‚
â”‚  â”‚ å°è¨ˆ: $60                  [âœ•] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ç‰›å¥¶                           â”‚  â”‚
â”‚  â”‚ æ•¸é‡: [2___] ç“¶  å–®åƒ¹: [40__]  â”‚  â”‚
â”‚  â”‚ å°è¨ˆ: $80                  [âœ•] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  åˆè¨ˆ: 3 ç¨® / 12 é …      ç¸½è¨ˆ: $245  â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      âœ“ å®Œæˆæ¡è³¼å–®              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.4 æ–°å¢ä¾›æ‡‰å•†å½ˆçª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  æ–°å¢ä¾›æ‡‰å•†                    â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  åç¨± *                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚                        â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  ç·¨ç¢¼ (è‡ªå‹•ç”¢ç”Ÿ)               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚ V-20260126-001         â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  å–æ¶ˆ   â”‚  â”‚  å»ºç«‹     â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.5 æˆåŠŸè¨Šæ¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚        âœ“ æ¡è³¼å–®å»ºç«‹æˆåŠŸ        â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚   å–®è™Ÿ: PO-20260126-001        â”‚  â”‚
â”‚  â”‚   ä¾›æ‡‰å•†: æ°´æœæ”¤é˜¿å§¨           â”‚  â”‚
â”‚  â”‚   é …ç›®: 3 é …                   â”‚  â”‚
â”‚  â”‚   é‡‘é¡: $245                   â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚   ç³»çµ±å°‡è‡ªå‹•ç”¢ç”Ÿæ”¶è²¨å–®åŠç™¼ç¥¨   â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ æŸ¥çœ‹æ¡è³¼å–® â”‚  â”‚ ç¹¼çºŒæƒæ  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.2 QR Code ç”¢ç”Ÿé 

#### 3.2.1 ä¸»é é¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°  QR Code ç”¢ç”Ÿå™¨                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  ç”¢å“æœå°‹                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” [æœå°‹] â”‚
â”‚  â”‚ è¼¸å…¥å“åæˆ–ç·¨ç¢¼...       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                      â”‚
â”‚  [å…¨é¸] [å–æ¶ˆå…¨é¸]   å·²é¸: 3 é …      â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â˜‘ BANANA    é¦™è•‰         æ ¹        â”‚
â”‚  â˜‘ APPLE     è˜‹æœ         é¡†        â”‚
â”‚  â˜ MILK      ç‰›å¥¶         ç“¶        â”‚
â”‚  â˜‘ ORANGE    æŸ³æ©™         é¡†        â”‚
â”‚  â˜ BREAD     éºµåŒ…         æ¢        â”‚
â”‚  â˜ EGG       é›è›‹         ç›’        â”‚
â”‚  â˜ RICE      ç™½ç±³         åŒ…        â”‚
â”‚  ... (å¯æ²å‹•)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ç”¢ç”Ÿå–®å¼µ    â”‚  â”‚ æ‰¹é‡åˆ—å°PDF â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.2 å–®å¼µ QR Code é è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚           â”‚  â”‚
â”‚  â”‚       â”‚â–ˆâ–ˆ QR CODE â–ˆâ–ˆâ”‚           â”‚  â”‚
â”‚  â”‚       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚           â”‚  â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚          é¦™è•‰                  â”‚  â”‚
â”‚  â”‚         BANANA                 â”‚  â”‚
â”‚  â”‚         å–®ä½: æ ¹               â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚  é—œé–‰   â”‚  â”‚  ä¸‹è¼‰åœ–ç‰‡  â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.3 æ‰¹é‡åˆ—å° PDF é è¦½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ—å°é è¦½                     [ä¸‹è¼‰PDF] [åˆ—å°]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  A4 Page 1                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”‚  [QR]     â”‚ â”‚  [QR]     â”‚ â”‚  [QR]     â”‚ â”‚
â”‚  â”‚  â”‚  é¦™è•‰     â”‚ â”‚  è˜‹æœ     â”‚ â”‚  æŸ³æ©™     â”‚ â”‚
â”‚  â”‚  â”‚  BANANA   â”‚ â”‚  APPLE    â”‚ â”‚  ORANGE   â”‚ â”‚
â”‚  â”‚  â”‚  æ ¹       â”‚ â”‚  é¡†       â”‚ â”‚  é¡†       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”‚  [QR]     â”‚ â”‚  [QR]     â”‚ â”‚  [QR]     â”‚ â”‚
â”‚  â”‚  â”‚  ç‰›å¥¶     â”‚ â”‚  éºµåŒ…     â”‚ â”‚  é›è›‹     â”‚ â”‚
â”‚  â”‚  â”‚  MILK     â”‚ â”‚  BREAD    â”‚ â”‚  EGG      â”‚ â”‚
â”‚  â”‚  â”‚  ç“¶       â”‚ â”‚  æ¢       â”‚ â”‚  ç›’       â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  ...                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”‚  é æ•¸: 1 / 3                                    â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€æŠ€è¡“è¦æ ¼

### 4.1 æ–°å¢æª”æ¡ˆ

| æª”æ¡ˆè·¯å¾‘ | ç”¨é€” |
|---------|------|
| `ui/src/app/views/ScanPurchasePage.vue` | æƒææ¡è³¼ä¸»é é¢ |
| `ui/src/app/views/QRCodeGeneratorPage.vue` | QR Code ç”¢ç”Ÿé é¢ |
| `ui/src/features/qrpurchase/api.ts` | API å‘¼å«å‡½æ•¸ |
| `ui/src/features/qrpurchase/types.ts` | TypeScript å‹åˆ¥å®šç¾© |
| `ui/src/components/QRScanner.vue` | ç›¸æ©Ÿæƒæå…ƒä»¶ |
| `ui/src/components/QRCodePreview.vue` | QR Code é¡¯ç¤ºå…ƒä»¶ |

### 4.2 è·¯ç”±è¨­å®š

```typescript
// ui/src/app/routes.ts

{
  path: '/scan-purchase',
  component: () => import('./views/ScanPurchasePage.vue'),
  meta: { title: 'æƒææ¡è³¼' }
}

{
  path: '/qr-generator',
  component: () => import('./views/QRCodeGeneratorPage.vue'),
  meta: { title: 'QRç”¢ç”Ÿå™¨' }
}
```

### 4.3 é¸å–®è¨­å®š

```typescript
// ui/src/features/permission/types.ts

{ id: 'K', path: '/scan-purchase', name: 'æƒææ¡è³¼' }
{ id: 'L', path: '/qr-generator', name: 'QRç”¢ç”Ÿå™¨' }
```

### 4.4 å‹åˆ¥å®šç¾©

```typescript
// ui/src/features/qrpurchase/types.ts

/** QR Code å…§å®¹æ ¼å¼ */
export interface QRCodeData {
  product: string  // M_Product.Value
}

/** æƒææ¸…å–®é …ç›® */
export interface PurchaseItem {
  productId: number       // M_Product_ID
  productValue: string    // M_Product.Value
  productName: string     // M_Product.Name
  uomId: number           // C_UOM_ID
  uomName: string         // C_UOM.Name
  qty: number             // æ•¸é‡ï¼Œé è¨­ 1
  price: number           // å–®åƒ¹ï¼Œé è¨­ 1
}

/** æ¡è³¼å–®è³‡æ–™ */
export interface PurchaseOrderData {
  vendorId: number        // C_BPartner_ID
  warehouseId: number     // M_Warehouse_ID
  items: PurchaseItem[]   // æ¡è³¼é …ç›®
}

/** ä¾›æ‡‰å•†è³‡æ–™ */
export interface Vendor {
  id: number              // C_BPartner_ID
  value: string           // C_BPartner.Value
  name: string            // C_BPartner.Name
}

/** æ–°å¢ä¾›æ‡‰å•†è«‹æ±‚ */
export interface CreateVendorRequest {
  name: string            // ä¾›æ‡‰å•†åç¨±
  value?: string          // ç·¨ç¢¼ï¼Œå¯é¸ï¼ˆè‡ªå‹•ç”¢ç”Ÿï¼‰
}
```

### 4.5 API å‡½æ•¸

```typescript
// ui/src/features/qrpurchase/api.ts

import { apiFetch } from '../../shared/api/http'
import type {
  PurchaseItem,
  PurchaseOrderData,
  Vendor,
  CreateVendorRequest
} from './types'

/**
 * å–å¾—æ‰€æœ‰å¯æ¡è³¼çš„ç”¢å“
 */
export async function getPurchasableProducts(token: string) {
  return apiFetch<{ records: any[] }>('/api/v1/models/M_Product', {
    token,
    searchParams: {
      $filter: `IsActive eq 'Y' and IsPurchased eq 'Y'`,
      $select: 'M_Product_ID,Name,Value,C_UOM_ID',
      $orderby: 'Name'
    }
  })
}

/**
 * ä¾ç”¢å“ç·¨ç¢¼æŸ¥è©¢ç”¢å“
 */
export async function getProductByValue(token: string, value: string) {
  return apiFetch<{ records: any[] }>('/api/v1/models/M_Product', {
    token,
    searchParams: {
      $filter: `Value eq '${value}' and IsActive eq 'Y'`,
      $select: 'M_Product_ID,Name,Value,C_UOM_ID'
    }
  })
}

/**
 * å–å¾—ç”¢å“çš„ UOM åç¨±
 */
export async function getUOMName(token: string, uomId: number) {
  return apiFetch<{ records: any[] }>('/api/v1/models/C_UOM', {
    token,
    searchParams: {
      $filter: `C_UOM_ID eq ${uomId}`,
      $select: 'C_UOM_ID,Name'
    }
  })
}

/**
 * å–å¾—ä¾›æ‡‰å•†æ¸…å–®
 */
export async function getVendors(token: string) {
  return apiFetch<{ records: Vendor[] }>('/api/v1/models/C_BPartner', {
    token,
    searchParams: {
      $filter: `IsActive eq 'Y' and IsVendor eq 'Y'`,
      $select: 'C_BPartner_ID,Value,Name',
      $orderby: 'Name'
    }
  })
}

/**
 * æ–°å¢ä¾›æ‡‰å•† (å«åœ°å€)
 */
export async function createVendor(token: string, data: CreateVendorRequest) {
  const value = data.value || `V-${new Date().toISOString().slice(0,10).replace(/-/g,'')}-${Date.now().toString().slice(-3)}`

  // 1. å»ºç«‹åœ°å€ (C_Location)
  const locationRes = await apiFetch<{ id: number }>('/api/v1/models/C_Location', {
    method: 'POST',
    token,
    json: {
      Address1: data.name,  // ç”¨ä¾›æ‡‰å•†åç¨±ä½œç‚ºåœ°å€ï¼ˆç°¡åŒ–ï¼‰
      C_Country_ID: 316     // å°ç£
    }
  })
  const locationId = locationRes.id

  // 2. å»ºç«‹ä¾›æ‡‰å•† (C_BPartner)
  const bpartnerRes = await apiFetch<{ id: number }>('/api/v1/models/C_BPartner', {
    method: 'POST',
    token,
    json: {
      Value: value,
      Name: data.name,
      IsVendor: true,
      IsCustomer: false
    }
  })
  const bpartnerId = bpartnerRes.id

  // 3. å»ºç«‹ä¾›æ‡‰å•†åœ°å€é—œè¯ (C_BPartner_Location)
  await apiFetch('/api/v1/models/C_BPartner_Location', {
    method: 'POST',
    token,
    json: {
      C_BPartner_ID: bpartnerId,
      C_Location_ID: locationId,
      Name: 'é è¨­åœ°å€'
    }
  })

  return { id: bpartnerId, value, name: data.name }
}

/**
 * å–å¾—å€‰åº«æ¸…å–®
 */
export async function getWarehouses(token: string) {
  return apiFetch<{ records: any[] }>('/api/v1/models/M_Warehouse', {
    token,
    searchParams: {
      $filter: `IsActive eq 'Y'`,
      $select: 'M_Warehouse_ID,Name',
      $orderby: 'Name'
    }
  })
}

/**
 * å–å¾—æ¡è³¼å–® DocType
 */
export async function getPurchaseOrderDocType(token: string) {
  return apiFetch<{ records: any[] }>('/api/v1/models/C_DocType', {
    token,
    searchParams: {
      $filter: `DocBaseType eq 'POO' and IsActive eq 'Y'`,
      $select: 'C_DocType_ID,Name',
      $top: 1
    }
  })
}

/**
 * å»ºç«‹æ¡è³¼å–®ä¸¦å®Œæˆ
 */
export async function createPurchaseOrder(token: string, data: PurchaseOrderData) {
  // 1. å–å¾— DocType
  const docTypeRes = await getPurchaseOrderDocType(token)
  const docTypeId = docTypeRes.records[0]?.C_DocType_ID

  if (!docTypeId) {
    throw new Error('æ‰¾ä¸åˆ°æ¡è³¼å–®å–®æ“šé¡å‹')
  }

  // 2. å»ºç«‹ Order Header
  const orderRes = await apiFetch<{ id: number }>('/api/v1/models/C_Order', {
    method: 'POST',
    token,
    json: {
      C_BPartner_ID: data.vendorId,
      IsSOTrx: false,
      M_Warehouse_ID: data.warehouseId,
      C_DocTypeTarget_ID: docTypeId,
      DateOrdered: new Date().toISOString().split('T')[0]
    }
  })

  const orderId = orderRes.id

  // 3. å»ºç«‹ Order Lines
  for (const item of data.items) {
    await apiFetch('/api/v1/models/C_OrderLine', {
      method: 'POST',
      token,
      json: {
        C_Order_ID: orderId,
        M_Product_ID: item.productId,
        QtyOrdered: item.qty,
        PriceActual: item.price
      }
    })
  }

  // 4. å®Œæˆæ¡è³¼å–® (é€é Process å‘¼å«)
  // table-id 259 = C_Order çš„ AD_Table_ID
  await apiFetch('/api/v1/processes/c_order-process', {
    method: 'POST',
    token,
    json: {
      'table-id': 259,
      'record-id': orderId
    }
  })

  // 5. å–å¾—å–®è™Ÿå›å‚³
  const orderInfo = await apiFetch<{ records: any[] }>('/api/v1/models/C_Order', {
    token,
    searchParams: {
      $filter: `C_Order_ID eq ${orderId}`,
      $select: 'C_Order_ID,DocumentNo'
    }
  })

  return {
    id: orderId,
    documentNo: orderInfo.records[0]?.DocumentNo
  }
}
```

### 4.6 ä¾è³´å¥—ä»¶

```json
{
  "dependencies": {
    "qrcode": "^1.5.3"
  },
  "devDependencies": {
    "@types/qrcode": "^1.5.5"
  }
}
```

å®‰è£æŒ‡ä»¤:
```bash
cd ui
bun add qrcode
bun add -d @types/qrcode
```

### 4.7 ç›¸æ©ŸæƒææŠ€è¡“é¸é …

| é¸é … | å¥—ä»¶ | èªªæ˜ |
|------|------|------|
| **A. vue-qrcode-reader** | `vue-qrcode-reader` | Vue 3 å°ˆç”¨ï¼Œç°¡å–®æ˜“ç”¨ |
| **B. html5-qrcode** | `html5-qrcode` | ç´” JSï¼ŒåŠŸèƒ½å®Œæ•´ |
| **C. åŸç”Ÿ API** | - | ä½¿ç”¨ BarcodeDetector API (éœ€è€ƒæ…®ç›¸å®¹æ€§) |

å»ºè­°ä½¿ç”¨ **html5-qrcode**ï¼Œç›¸å®¹æ€§è¼ƒå¥½ã€‚

```bash
bun add html5-qrcode
```

---

## äº”ã€iDempiere å‰ç½®è¨­å®š

### 5.1 DocType è¨­å®š

ç¢ºèªæ¡è³¼å–®çš„ DocType å·²è¨­å®šè‡ªå‹•ç”¢ç”Ÿ MR åŠ Invoiceï¼š

| è¨­å®šé … | è·¯å¾‘ | å€¼ |
|--------|------|-----|
| è‡ªå‹•ç”¢ç”Ÿæ”¶è²¨ | Document Type > Is Auto Generate Receipt | âœ“ |
| è‡ªå‹•ç”¢ç”Ÿç™¼ç¥¨ | Document Type > Is Auto Generate Invoice | âœ“ |

### 5.2 ç”¢å“è¨­å®š

ç¢ºèªç”¢å“å·²å‹¾é¸ã€Œå¯æ¡è³¼ã€ï¼š

| æ¬„ä½ | å€¼ |
|------|-----|
| IsPurchased | Y |
| IsActive | Y |

---

## å…­ã€æ¸¬è©¦æ¡ˆä¾‹

### 6.1 QR Code ç”¢ç”Ÿ

| æ¸¬è©¦é …ç›® | é æœŸçµæœ |
|---------|---------|
| æœå°‹ç”¢å“ | é¡¯ç¤ºç¬¦åˆæ¢ä»¶çš„ç”¢å“ |
| å‹¾é¸å¤šå€‹ç”¢å“ | é¡¯ç¤ºå·²é¸æ•¸é‡ |
| ç”¢ç”Ÿå–®å¼µ QR | é¡¯ç¤º QR Code é è¦½ï¼Œå¯ä¸‹è¼‰ |
| æ‰¹é‡åˆ—å° | ç”¢ç”Ÿ PDFï¼Œæ’ç‰ˆæ­£ç¢º |

### 6.2 æƒææ¡è³¼

| æ¸¬è©¦é …ç›® | é æœŸçµæœ |
|---------|---------|
| é¸æ“‡ä¾›æ‡‰å•† | ä¸‹æ‹‰é¡¯ç¤º IsVendor=Y çš„å¤¥ä¼´ |
| æ–°å¢ä¾›æ‡‰å•† | æˆåŠŸå»ºç«‹ä¸¦è‡ªå‹•é¸å– |
| æƒæ QR Code | å½ˆå‡ºè¼¸å…¥æ¡†ï¼Œé¡¯ç¤ºç”¢å“è³‡è¨Š |
| è¼¸å…¥æ•¸é‡/åƒ¹æ ¼ | åŠ å…¥æ¸…å–®ï¼Œè¨ˆç®—å°è¨ˆ |
| ä¿®æ”¹æ¸…å–®æ•¸é‡ | å³æ™‚æ›´æ–°å°è¨ˆèˆ‡ç¸½è¨ˆ |
| åˆªé™¤é …ç›® | é …ç›®ç§»é™¤ï¼Œç¸½è¨ˆæ›´æ–° |
| å®Œæˆæ¡è³¼ | å»ºç«‹ PO ä¸¦ Complete |
| è‡ªå‹• MR/IN | iDempiere è‡ªå‹•ç”¢ç”Ÿ |

### 6.3 éŒ¯èª¤è™•ç†

| æ¸¬è©¦é …ç›® | é æœŸçµæœ |
|---------|---------|
| æƒæç„¡æ•ˆ QR | é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ |
| æƒæä¸å­˜åœ¨çš„ç”¢å“ | é¡¯ç¤ºã€Œæ‰¾ä¸åˆ°ç”¢å“ã€ |
| æœªé¸ä¾›æ‡‰å•†å°±å®Œæˆ | é¡¯ç¤ºé©—è­‰éŒ¯èª¤ |
| API å¤±æ•— | é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼Œä¸å½±éŸ¿æ¸…å–® |
| ç›¸æ©Ÿæ¬Šé™è¢«æ‹’çµ• | é¡¯ç¤ºå¼•å°è¨Šæ¯ï¼Œæç¤ºé–‹å•Ÿæ¬Šé™ |

### 6.4 ç›¸æ©Ÿæ¬Šé™è™•ç†

```
è‹¥ç”¨æˆ¶æ‹’çµ•ç›¸æ©Ÿæ¬Šé™ï¼Œé¡¯ç¤ºï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“· éœ€è¦ç›¸æ©Ÿæ¬Šé™                   â”‚
â”‚                                    â”‚
â”‚  è«‹åœ¨ç€è¦½å™¨è¨­å®šä¸­å…è¨±ç›¸æ©Ÿå­˜å–ï¼Œ    â”‚
â”‚  æ‰èƒ½ä½¿ç”¨æƒæåŠŸèƒ½ã€‚                â”‚
â”‚                                    â”‚
â”‚  æˆ–ä½¿ç”¨ä¸‹æ–¹çš„æ‰‹å‹•è¼¸å…¥åŠŸèƒ½ã€‚        â”‚
â”‚                                    â”‚
â”‚  [å‰å¾€è¨­å®šèªªæ˜]  [ä½¿ç”¨æ‰‹å‹•è¼¸å…¥]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸ƒã€æœªä¾†æ“´å……

| åŠŸèƒ½ | å„ªå…ˆç´š | èªªæ˜ |
|------|--------|------|
| é›¢ç·šæ¨¡å¼ | ä½ | æš«å­˜æƒææ¸…å–®ï¼Œé€£ç·šå¾ŒåŒæ­¥ |
| æƒæè²éŸ³å›é¥‹ | ä¸­ | æˆåŠŸ/å¤±æ•—ä¸åŒéŸ³æ•ˆ |
| æ¡è³¼æ­·å² | ä¸­ | æŸ¥çœ‹å·²ç”¢ç”Ÿçš„æ¡è³¼å–® |
| å¿«é€Ÿè£œè²¨ | é«˜ | åº«å­˜é ç›´æ¥ç”¢ç”Ÿè£œè²¨å»ºè­° |
| é‡è¤‡æƒæç´¯åŠ  | ä¸­ | æƒæåŒç”¢å“è‡ªå‹• +1 |

---

## å…«ã€è®Šæ›´è¨˜éŒ„

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´å…§å®¹ |
|------|------|---------|
| 1.0 | 2026-01-26 | åˆç‰ˆè¨­è¨ˆ |
| 1.1 | 2026-01-26 | ä¿®æ­£æ¡è³¼å–®å®Œæˆ APIï¼šæ”¹ç”¨ `POST /api/v1/processes/c_order-process` å–ä»£ docaction |
| 1.2 | 2026-01-26 | æ–°å¢ä¾›æ‡‰å•†éœ€åŒæ™‚å»ºç«‹åœ°å€ (C_Location + C_BPartner_Location)ï¼›ç¢ºèª OrderLine å–®ä½/ç¨…åˆ¥è™•ç†ï¼›åŠ å…¥ç›¸æ©Ÿæ¬Šé™è™•ç†èªªæ˜ |
